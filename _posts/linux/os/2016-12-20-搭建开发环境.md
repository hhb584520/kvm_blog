# 1. 配置VIM

首先，安装vim，一般情况下在安装redhat时，默认就安装了vim。你可以用vim -v来查看你的系统是否安装了vim。如果显示了vim版本就表示已经安装了vim，否则你可以通过“从这里开始”-->“系统设置”-->“添加/删除应用程序”，然后选中“编辑器”来更新你的软件。安装之后就要通过配置.vimrc配置符合自己风格的vim了。接下来就要找到.vimrc，如果你上网查找一些相关的资料时，他们会告诉你：在用户主目录——/home/root/下有一个.vimrc文件，在/etc/目录下也有一个vimrc。但是，也许你找了很久都没有找到这两个文件，这很正常，因为在刚安装上vim时，在以上两个目录中确实没有这两个文件，换句话说，这两个文件是认为加上去的。要找到你的vimrc，首先用vim打开一个文件，然后在vim中输入指令":version" ，你会看到"系统vimrc配置文件：/usr/share/vim/vim61/macros/vimrc"，然后将这个文件拷贝到你的主目录下，cp  /usr/share/vim/vim61/macros/vimrc  /root/ ，将vimrc改名为隐藏文件，mv vimrc .vimrc。接下来打开.vimrc，在里面添加几个条目：

在 /etc/vimrc添加下面的条目  
set number    " turn on line number——开启行号显示  
// set mouse     " use mouse everywhere——开启鼠标功能  
set cindent    " do c-style indenting——使用C风格缩进  
这样，vim基本就配置完成了。当然在编辑.vimrc时可以根据个人的喜好设置，具体的设置项可以使用:help命令查看，或者上网查查吧。  
 
# 2. 配置ctags
首先到http://ctags.sourceforge.net/下载ctags-5.8.tar.gz ，注意：有些浏览器（例如IE8）会阻止文件下载，这时只需要解除阻止即可进入下载界面。然后安装ctags.

    #tar xzvf ctags-5.8.tar.gz
    #cd ctags-5.8
    #./configure
    #make
    #make install

注意：如果你在执行./configure时出现错误，那么很有可能就是你的gcc没有安装完全，解决方法——“从这里开始”-->“系统设置”-->“添加/删除应用程序”，然后选择“开发工具”，更新你的gcc编译器。安装完成后就可以使用ctags命令了。

	`# ctags -R *`
或  

	`# ctag -R    // 在需要参加 tag 的目录里面执行。`

"-R"表示递归创建，也就包括源代码根目录下的所有子目录下的源程序。"tags"文件中包括这些对象的列表：  
l         用#define定义的宏  
l         枚举型变量的值  
l         函数的定义、原型和声明  
l         名字空间（namespace）  
l         类型定义（typedefs）  
l         变量（包括定义和声明）  
l         类（class）、结构（struct）、枚举类型（enum）和联合（union）  
l         类、结构和联合中成员变量或函数  

注意：运行vim的时候，必须在"tags"文件所在的目录下运行。否则，运行vim的时候还要用":set tags="命令设定"tags"文件的路径，这样vim才能找到"tags"文件。

VIM用这个"tags"文件来定位上面这些做了标记的对象，下面介绍一下定位这些对象的方法： 

1) 用命令行。在运行vim的时候加上"-t"参数，例如：

    # vim -t foo_bar
    这个命令将打开定义"foo_bar"（变量或函数或其它）的文件，并把光标定位到这一行。

2)在vim编辑器内用":ta"命令，例如：

    :tag  foo_bar

3)最方便的方法是把光标移到变量名或函数名上，然后按下"Ctrl-]"。用"Ctrl-o"退回原来的地方。  
4) 变量定义和光标移到    
- ‘gd’  转到当前光标所指的局部变量的定义  
- ‘*’    转到当前光标所指的单词下一次出现的地方  
- ‘#’    转到当前光标所指的单词上一次出现的地方  


# 3. 配置taglist #
首先下载taglist_45.zip，下载地址http://www.vim.org/scripts/script.php?script_id=273
解压文件：unzip -d taglist taglist_42.zip    -d 表示要把文件解压到某个目录下。
解压得到两个文件。./taglist/doc/taglist.txt; ./taglist/plugin/taglist.vim
分别复制到各自的目录下：
    
    cp ./taglist/doc/taglist.txt /usr/share/vim/vim61/doc/
    cp ./taglist/plugin/taglist.vim /usr/share/vim/vim61/plugin/

配置 ~/.vimrc文件。

    filetype plugin on 
    let Tlist_Ctags_Cmd = '/usr/bin/ctags' “设置ctags命令目录
    let Tlist_Show_One_File = 1 "不同时显示多个文件的tag，只显示当前文件的 
    let Tlist_Exit_OnlyWindow =  1 "如果taglist窗口是最后一个窗口，则退出vim 
    let Tlist_Use_Right_Window = 1 “让taglist窗口在右侧显示

命令与用法：  
在vim中命令模式下使用：  
:Tlist              // 打开或者关闭当前文件的索引；  
:TlistSync     // 立即在打开的索引窗口中定位当前的光标所在位置属于哪个函数或者结构定义中。  
在Taglist窗口按  
F1:打开帮助  
回车键: 跳到光标所在的标记的定义处(如将光标移到main函数,按回车键)  
o: 新建一个窗口,跳到标记定义处  
p: 预览标记定义(仍然在taglist窗口)  
空格:显示标记的原型(如函数原型)  
u:更新标记列表(比如源文件新增了一个函数,并在保存后,可在taglist窗口按u)  
s:选择排序字段  
d:删除光标所在的taglist文件(如用vi打开了两个文件f1.c,f2.c可以删除f1.c的标记)  
x:放大/缩小taglist窗口  
+:展开(指标记)  
-:折叠  
*:全部展开  
=:全部折叠  
[[:将光标移到前一个文件的起点  
]]:将光标移到后一个文件的起点  
q:退出taglist窗口  
F1:关闭帮助   

# 4. tmux #
tmux是一个优秀的终端复用软件，即使非正常掉线，也能保证当前的任务运行，这一点对于 远程SSH访问特别有用，网络不好的情况下仍然能保证工作现场不丢失!此外，tmux完全使用键盘 控制窗口，实现窗口的切换功能。
简单地说，tmux对于我主要有两个功能（这应该也是tmux的主要功能）:
split窗口。可以在一个terminal下打开多个终端，也可以对当前屏幕进行各种split，即可以 同时打开多个显示范围更小的终端。
在使用SSH的环境下，避免网络不稳定，导致工作现场的丢失。想象以下场景， 你在执行一条命令的过程中，由于网络不稳定，SSH连接断开了。这个时候，你就不知道之前 的那条命令是否执行成功。如果此时你打开了很多文件，进入了较深层次的目录，由于网络 不稳定，SSH连接断开。重新连接以后，你又不得不重新打开那些文件，进入那个深层次的 目录。如果使用了tmux，重新连接以后，就可以直接回到原来的工作环境，不但提高了工作 效率，还降低了风险，增加了安全性。
## 4.1安装 ##
sudo apt-get install tmux
安装完成后输入命令tmux即可打开软件，界面十分简单，类似一个下方带有状态栏的终端控制台； 不出意外，这时候你会跟我第一次一样，觉得tmux没什么牛逼的。根据tmux的定义，在开启了tmux服务器后，会首先创建一个会话，而这个会话则会首先创建一个 窗口，其中仅包含一个面板；也就是说，这里看到的所谓终端控制台应该称作tmux的一个面板， 虽然其使用方法与终端控制台完全相同。
tmux使用C/S模型构建，主要包括以下单元模块：  

- server服务器。输入tmux命令时就开启了一个服务器。
- session会话。一个服务器可以包含多个会话
- window窗口。一个会话可以包含多个窗口。
- pane面板。一个窗口可以包含多个面板。

## 4.2常用按键 ##
这里需要说明一点的是，tmux的任何指令，都包含一个前缀，也就是说，你按了前缀(一组按键， 默认是Ctrl+b)以后，系统才知道你接下来的指令是发送给tmux的。

- C-b ? 显示快捷键帮助
- C-b C-o 调换窗口位置，类似与vim 里的C-w
- C-b 空格键 采用下一个内置布局
- C-b ! 把当前窗口变为新窗口
- C-b “ 横向分隔窗口
- C-b % 纵向分隔窗口
- C-b q 显示分隔窗口的编号
- C-b o 跳到下一个分隔窗口
- C-b 上下键 上一个及下一个分隔窗口
- C-b C-方向键 调整分隔窗口大小
- C-b c 创建新窗口
- C-b 0~9 选择几号窗口
- C-b c 创建新窗口
- C-b n 选择下一个窗口
- C-b l 切换到最后使用的窗口
- C-b p 选择前一个窗口
- C-b w 以菜单方式显示及选择窗口
- C-b t 显示时钟
- C-b ; 切换到最后一个使用的面板
- C-b x 关闭面板
- C-b & 关闭窗口
- C-b s 以菜单方式显示和选择会话
- C-b d 退出tumx，并保存当前会话，这时，tmux仍在后台运行，可以通过tmux attach进入 到指定的会话

## 4.3 配置 ##
我们先来看一下几个配置。tmux的配置文件是 ~/.tmux.conf，这个文件可能不存在，你可以自己新建。下面开始配置，首先，有没有 觉得tmux的前缀按起来太不方便了，ctrl与b键隔得太远，很多人把它映射成C+a，也就 是在配置文件(~/.tmux.conf)中加入下面这条语句：

	#设置前缀为Ctrl + a
	set -g prefix C-a
	与此同时，取消默认的前缀按键：
	#解除Ctrl+b 与前缀的对应关系
	unbind C-b

配置完以后，重启tmux起效，或者先按C+b，然后输入：，进入命令行模式， 在命令行模式下输入：
source-file ~/.tmux.conf
你也可以跟我一样，在配置文件中加入下面这句话，以后改了只需要按前缀+r了。

	#将r 设置为加载配置文件，并显示"reloaded!"信息
	bind r source-file ~/.tmux.conf \; display "Reloaded!"

关于前缀，很多人都喜欢改成Ctrl+a，不过我个人更喜欢Ctrl+x，如果你是vim用户，你一定懂 的。还有就是面板的切换很不方便，需要先按前缀，再按方向键，还记得vim里面怎么切换各个 面板的吗？tmux也可以，因为它支持映射。把前缀映射改成Ctrl+x，再加入如下几条语句， 现在切换窗口就和vim一摸一样了，顿时觉得亲切了很多。

	#up
	bind-key k select-pane -U
	#down
	bind-key j select-pane -D
	#left
	bind-key h select-pane -L
	#right
	bind-key l select-pane -R

上面的最后一条语句会更改C-x l的功能，我挺喜欢这个功能的，因为我们很时候都是在两个窗 口或这两个面板中切换，所以我又加入如下语句

	#select last window
	bind-key C-l select-window -l

现在我的l键可不能随便按了，Ctrl+x l是切换面板，Ctrl+x Ctrl+l切换窗口，Ctrl+l清屏。
复制模式copy-mode
前缀 [ 进入复制模式
按 space 开始复制，移动光标选择复制区域
按 Enter 复制并退出copy-mode。
将光标移动到指定位置，按 PREIFX ] 粘贴
如果把tmux比作vim的话，那么我们大部分时间都是处于编辑模式，我们复制的时候可不可以像 vim一样移动呢？只需要在配置文件(~/.tmux.conf)中加入如下行即可。

	#copy-mode 将快捷键设置为vi 模式
	setw -g mode-keys vi

## 4.4 会话 ##
- C-x s 以菜单的方式查看并选择会话
- C-x :new-session 新建一个会话
- C-x d 退出并保存会话

终端运行 tmux attach 返回会话

	#命名会话
	tmux new -s session
	tmux new -s session -d #在后台建立会话
	tmux ls #列出会话
	tmux attach -t session #进入某个会话

使当前pane 最大化

	# zoom pane <-> window
	#http://tmux.svn.sourceforge.net/viewvc/tmux/trunk/examples/tmux-zoom.sh
	bind ^z run "tmux-zoom"

滚屏
	滚屏要进入copy-mode，即前缀+[，然后就可以用上下键来滚动屏幕，配置了vi快捷键模式，就 可以像操作vi一样来滚动屏幕，非常的方便。退出直接按‘q’键即可。


## 4.5 快速启动tmux ##
如果觉得每次都要打开tmux，然后在打开几个窗口和面板很麻烦，那么下面这个脚本你一定会 喜欢。参考这里
	#!/bin/sh
	#
	
	cmd=$(which tmux) # tmux path
	session=codefun   # session name
	
	if [ -z $cmd ]; then
	  echo "You need to install tmux."
	  exit 1
	fi
	
	$cmd has -t $session
	
	if [ $? != 0 ]; then
	  $cmd new -d -n vim -s $session "vim"
	  $cmd splitw -v -p 20 -t $session "pry"
	  $cmd neww -n mutt -t $session "mutt"
	  $cmd neww -n irssi -t $session "irssi"
	  $cmd neww -n cmus -t $session "cmus"
	  $cmd neww -n zsh -t $session "zsh"
	  $cmd splitw -h -p 50 -t $session "zsh"
	  $cmd selectw -t $session:5
	fi
	
	$cmd att -t $session
	
	exit 0
