# 1. 调度器 #

![](/kvm_blog/img/sched_class.jpg)

核心调度器由周期性调度器和主调度器，其中周期性调度器在 scheduler_tick中实现。如果系统正在活动中，内核会按照频率HZ自动调用该函数; 主调度器在内核的许多地方，如果要将CPU分配给与当前活动进程不同的另一个进程，都会直接调用主调度器函数(schedule)

实时进程和普通的进程有一个根本的不同之处:如果系统中有一个实时进程且可运行，那么调度器总会选中它运行，除非有一个优先级更高的实时进程。现有的两种实时类:

- 循环进程(SCHED_RR)有时间片，其值在进程运行时会减少，就像是普通进程。在所有的时间段都到期后，则该值重置为初始值，而进程则置于队列的末尾。这确保了在有几个优先级相同的 SCHED_RR 进程的情况下，他们总是依次执行。
- 先进先出进程(SCHED_FIFO)没有时间片，在被调度器选择执行后，可以运行任意长时间。


# 参考资料 #

CFS: https://www.ibm.com/developerworks/cn/linux/l-completely-fair-scheduler/